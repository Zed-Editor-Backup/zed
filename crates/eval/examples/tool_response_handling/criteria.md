1. The changes involve modifying the conditional logic for handling tool responses in the `format_messages` function. The nested if statement checking if `tool_content` is empty has been removed, and the code now directly checks if `text` is empty. When `text` is empty, it sets a default message "Tool call is done." before pushing the function response to the parts array.
2. The modification simplifies the control flow by eliminating one level of nesting. The function response JSON structure remains the same, containing the response ID and the text content, but it's now pushed unconditionally after the empty text check. This makes the code more straightforward and removes the dependency on the `tool_content` check.
3. A new test case `test_response_to_message_with_empty_content` has been added to verify the behavior when handling empty tool responses. The test creates an empty tool result vector, processes it through the message formatting function, and asserts that the output matches the expected payload structure with the default "Tool call is done." message in the function response.
